const f={"web-app":[["● Update(src/App.tsx)","c-white"],["╵  Added 7 lines, removed 3 lines","c-dim"],["  14     import React from 'react'","c-ctx"],["  15 -   import { legacy } from './old'","c-del"],["  16 -   import { compat } from './shim'","c-del"],["  15 +   import { useAuth } from './hooks'","c-add"],["  16 +   import { motion } from 'motion'","c-add"],["  17","c-ctx"],["  18     export function App() {","c-ctx"],["  19 -     const [c, setC] = useState(0)","c-del"],["  19 +     const { user } = useAuth()","c-add"],["  20 +     const [view, setView] = useState()","c-add"],["  21       return (","c-ctx"],['  22 -       <div className="app">',"c-del"],['  22 +       <main className="shell">',"c-add"],["  23 +         <Sidebar />","c-add"],["  24 +         <Content v={view} />","c-add"],["  25 +       </main>","c-add"]],"api-server":[["● Update(routes/tasks.ts)","c-white"],["╵  Added 4 lines, removed 1 line","c-dim"],["  23     app.get('/tasks', async (req, res) => {","c-ctx"],["  24 +     const cached = await redis.get(key)","c-add"],["  25 +     if (cached) return res.json(cached)","c-add"],["  26       const tasks = await db.query(sql)","c-ctx"],["  27 -     res.json(tasks)","c-del"],["  27 +     await redis.set(key, tasks, 'EX', 300)","c-add"],["  28 +     return res.json(tasks)","c-add"],["  29     })","c-ctx"],["","c-dim"],["● Update(lib/cache.ts)","c-white"],["╵  Added 6 lines (new file)","c-dim"],["   1 +   import Redis from 'ioredis'","c-add"],["   2 +","c-add"],["   3 +   export const redis = new Redis({","c-add"],["   4 +     host: process.env.REDIS_HOST,","c-add"],["   5 +     port: 6379,","c-add"],["   6 +   })","c-add"]],"ml-pipeline":[["● Update(train.py)","c-white"],["╵  Added 5 lines, removed 1 line","c-dim"],["   8     def train(config):","c-ctx"],["   9       model = load(config.arch)","c-ctx"],["  10 -     opt = SGD(model.parameters())","c-del"],["  10 +     opt = AdamW(model.parameters(),","c-add"],["  11 +         lr=config.lr, weight_decay=0.01)","c-add"],["  12 +     sched = CosineAnnealingLR(opt)","c-add"],["  13       for epoch in range(epochs):","c-ctx"],["  14         loss = train_epoch(model)","c-ctx"],["  15 +       sched.step()","c-add"],['  16 +       wandb.log({"loss": loss})',"c-add"],["","c-dim"],["● Update(config.yaml)","c-white"],["╵  Added 2 lines, removed 1 line","c-dim"],["   3     optimizer:","c-ctx"],["   4 -     type: sgd","c-del"],["   4 +     type: adamw","c-add"],["   5 +     weight_decay: 0.01","c-add"]]};function c(e){return new Promise(i=>setTimeout(i,e))}function v(e,i){const s=i.getBoundingClientRect(),a=e.getBoundingClientRect();return{x:a.left-s.left+a.width*.4,y:a.top-s.top+a.height*.5}}function w(){document.querySelectorAll(".terminal-reel").forEach((e,i)=>{e.classList.remove("scrolling"),e.style.removeProperty("animation");const s=e.querySelectorAll(".tl"),a=6.75,n=Math.max(0,s.length-10);let t=0;function r(){if(t>=n){setTimeout(()=>{e.style.transform="translateY(0)",t=0,setTimeout(r,1200+Math.random()*800)},2500+Math.random()*1e3);return}t++,e.style.transform=`translateY(-${t*a}px)`;const o=Math.random();let d;o>.55?d=100+Math.random()*100:o>.2?d=300+Math.random()*250:d=600+Math.random()*500,setTimeout(r,d)}setTimeout(r,600+i*900)})}function g(e){return e.startsWith("●")?300:0}function x(e,i){return e.startsWith("●")?200:e.startsWith("╵")?250:i==="c-del"||i==="c-add"?75:i==="c-ctx"?120:e.trim()?150:180}async function y(e,i){e.innerHTML="";for(let s=0;s<i.length;s++){const[a,l]=i[s],n=g(a);n>0&&await c(n);const t=document.createElement("div");t.className="term-line "+l,t.textContent=a||" ",e.appendChild(t),await c(15),t.classList.add("typed"),e.scrollTop=e.scrollHeight,await c(x(a,l))}}async function E(){const e=document.getElementById("hero-screen"),i=document.getElementById("hero-notch"),s=document.getElementById("hero-cursor"),a=document.getElementById("hero-terminal"),l=document.getElementById("hero-term-body"),n=document.getElementById("hero-ripple"),t=i.querySelectorAll(".mini-card");if(!e||!i)return;let r=!0;for(new IntersectionObserver(([d])=>{r=d.isIntersecting},{threshold:.2}).observe(e);;){for(;!r;)await c(200);if(i.classList.remove("open"),s.classList.remove("visible","fast"),a.classList.remove("visible"),t.forEach(L=>L.classList.remove("hovered","clicked")),s.style.left="75%",s.style.top="70%",l.innerHTML="",a.querySelector(".terminal-title").textContent="",await c(1800),!r)continue;i.classList.add("open"),await c(900),s.classList.add("visible"),await c(400);const d=v(t[0],e);s.style.left=d.x+"px",s.style.top=d.y+"px",await c(700),t[0].classList.add("hovered"),await c(1200),t[0].classList.remove("hovered");const m=v(t[1],e);s.style.left=m.x+"px",s.style.top=m.y+"px",await c(500),t[1].classList.add("hovered"),await c(1200),t[1].classList.remove("hovered");const u=v(t[2],e);s.style.left=u.x+"px",s.style.top=u.y+"px",await c(500),t[2].classList.add("hovered"),await c(800),t[2].classList.remove("hovered"),s.classList.add("fast");const p=v(t[0],e);s.style.left=p.x+"px",s.style.top=p.y+"px",await c(500),t[0].classList.add("hovered"),await c(300),t[0].classList.remove("hovered"),t[0].classList.add("clicked"),n.style.left=p.x+"px",n.style.top=p.y+"px",n.classList.remove("active"),n.offsetWidth,n.classList.add("active"),await c(200),t[0].classList.remove("clicked"),s.classList.remove("fast"),i.classList.remove("open"),await c(400);const h=t[0].dataset.project;a.querySelector(".terminal-title").textContent=h+" — claude",a.classList.add("visible"),s.style.left="60%",s.style.top="50%",await y(l,f[h]),await c(1500),a.classList.remove("visible"),s.classList.remove("visible"),await c(1500)}}function b(){const e=document.getElementById("interactive-screen"),i=document.getElementById("interactive-notch"),s=document.getElementById("interactive-terminal"),a=document.getElementById("interactive-term-body"),l=document.getElementById("interactive-term-title"),n=e.querySelectorAll(".interactive-card");if(!e||!i)return;let t=!1,r=null;e.addEventListener("mouseenter",()=>{i.classList.add("open")}),e.addEventListener("mouseleave",()=>{t||i.classList.remove("open")}),n.forEach(o=>{o.addEventListener("mouseenter",()=>o.classList.add("hovered")),o.addEventListener("mouseleave",()=>o.classList.remove("hovered")),o.addEventListener("click",()=>{const d=o.dataset.project,m=f[d];m&&(t=!0,i.classList.remove("open"),o.classList.add("clicked"),setTimeout(()=>o.classList.remove("clicked"),200),l.textContent=o.dataset.title||d+" — claude",s.classList.add("visible"),y(a,m),r&&clearTimeout(r),r=setTimeout(()=>{s.classList.remove("visible"),t=!1},7500))})}),e.addEventListener("click",o=>{t&&!s.contains(o.target)&&!o.target.closest(".mini-card")&&(s.classList.remove("visible"),t=!1,r&&clearTimeout(r))})}const T=new IntersectionObserver(e=>{e.forEach(i=>{i.isIntersecting&&i.target.classList.add("revealed")})},{threshold:.1,rootMargin:"0px 0px -40px 0px"});document.querySelectorAll(".reveal").forEach(e=>T.observe(e));w();E();b();
